# Voice Changer Better - å®æ—¶è¯­éŸ³å˜å£°å™¨ä¼˜åŒ–ç‰ˆ

[English](README_en.md) | [æ—¥æœ¬èª](README_ja.md) | ä¸­æ–‡

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å®æ—¶è¯­éŸ³å˜å£°å™¨é¡¹ç›®ï¼Œæ”¯æŒå¤šç§è¯­éŸ³å˜å£°æ¨¡å‹ï¼ŒåŒ…æ‹¬RVCã€SoVitsSVCã€DDSP-SVCç­‰ã€‚æœ¬é¡¹ç›®åŸºäº [w-okada/voice-changer](https://github.com/w-okada/voice-changer) è¿›è¡ŒUIç•Œé¢ä¼˜åŒ–ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

## åŸé¡¹ç›®

æœ¬é¡¹ç›®åŸºäº [w-okada/voice-changer](https://github.com/w-okada/voice-changer) å¼€å‘ï¼Œæ„Ÿè°¢åŸä½œè€…çš„ä¼˜ç§€å·¥ä½œã€‚

## UIç•Œé¢ä¼˜åŒ–å†…å®¹

### 1. æ•´ä½“å¸ƒå±€ä¼˜åŒ–
- **ç´§å‡‘åŒ–è®¾è®¡**ï¼šå‡å°‘äº†é…ç½®åŒºåŸŸçš„é—´è·å’Œå†…è¾¹è·ï¼Œä½¿ç•Œé¢æ›´åŠ ç´§å‡‘
- **ç»Ÿä¸€å®½åº¦**ï¼šæ‰€æœ‰é…ç½®å­åŒºåŸŸé‡‡ç”¨ç»Ÿä¸€çš„å¼¹æ€§å¸ƒå±€ï¼ˆ`flex: 1`ï¼‰ï¼Œç¡®ä¿è§†è§‰ä¸€è‡´æ€§
- **å“åº”å¼å¸ƒå±€**ï¼šä¼˜åŒ–äº†å„ä¸ªæ§ä»¶çš„æœ€å°å®½åº¦è®¾ç½®ï¼Œæé«˜äº†ç•Œé¢çš„å“åº”æ€§

### 2. æ§åˆ¶æŒ‰é’®ä¼˜åŒ–
- **å°ºå¯¸è°ƒæ•´**ï¼šå‡å°äº†æŒ‰é’®çš„å­—ä½“å¤§å°ã€é«˜åº¦å’Œå†…è¾¹è·ï¼Œä½¿æŒ‰é’®æ›´åŠ ç´§å‡‘
- **åœ†è§’ä¼˜åŒ–**ï¼šç»Ÿä¸€äº†æŒ‰é’®çš„åœ†è§’åŠå¾„ï¼Œæä¾›æ›´ç°ä»£çš„è§†è§‰æ•ˆæœ
- **é˜´å½±æ•ˆæœ**ï¼šä¼˜åŒ–äº†æŒ‰é’®çš„é˜´å½±æ•ˆæœï¼Œå¢å¼ºäº†è§†è§‰å±‚æ¬¡æ„Ÿ
- **å¼¹æ€§å¸ƒå±€**ï¼šæŒ‰é’®é‡‡ç”¨å¼¹æ€§å¸ƒå±€ï¼Œè‡ªåŠ¨é€‚åº”å®¹å™¨å®½åº¦

### 3. æ»‘å—æ§ä»¶ä¼˜åŒ–
- **é—´è·è°ƒæ•´**ï¼šå‡å°‘äº†æ»‘å—æ§ä»¶ä¹‹é—´çš„é—´è·ï¼Œæé«˜ç©ºé—´åˆ©ç”¨ç‡
- **å­—ä½“ä¼˜åŒ–**ï¼šè°ƒæ•´äº†æ»‘å—æ ‡ç­¾å’Œæ•°å€¼çš„å­—ä½“å¤§å°ï¼Œä¿æŒæ¸…æ™°å¯è¯»
- **å¯¹é½æ–¹å¼**ï¼šä¼˜åŒ–äº†æ»‘å—æ§ä»¶çš„å¯¹é½æ–¹å¼ï¼Œç¡®ä¿è§†è§‰æ•´é½

### 4. å™ªå£°æ§åˆ¶åŒºåŸŸä¼˜åŒ–
- **å¤é€‰æ¡†å¸ƒå±€**ï¼šä¼˜åŒ–äº†å¤é€‰æ¡†å®¹å™¨çš„é—´è·å’Œå­—ä½“å¤§å°
- **æ ‡ç­¾å¯¹é½**ï¼šæ”¹è¿›äº†æ ‡ç­¾çš„å¯¹é½æ–¹å¼ï¼Œæä¾›æ›´å¥½çš„è§†è§‰æ•ˆæœ

### 5. å­—ç¬¦åŒºåŸŸæ§åˆ¶ä¼˜åŒ–
- **æ°´å¹³å¸ƒå±€**ï¼šå°†å¢ç›Šæ§åˆ¶ç§»åŠ¨åˆ°å¼€å§‹/åœæ­¢/ç›´é€šæŒ‰é’®çš„å³ä¾§
- **ç©ºé—´èŠ‚çœ**ï¼šè¾“å…¥/è¾“å‡ºå¢ç›Šæ»‘å—æ’åˆ—åœ¨åŒä¸€è¡Œï¼ŒèŠ‚çœå‚ç›´ç©ºé—´
- **è§†è§‰å¹³è¡¡**ï¼šé€šè¿‡CSSç±» `.character-area-control-field-horizontal` å®ç°æ°´å¹³å¸ƒå±€

## æŠ€æœ¯å®ç°

### ä¸»è¦ä¿®æ”¹æ–‡ä»¶
1. **App.css** - ä¸»è¦æ ·å¼æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰UIä¼˜åŒ–çš„CSSè§„åˆ™
2. **101_CharacterArea.tsx** - å­—ç¬¦åŒºåŸŸç»„ä»¶ï¼Œå®ç°äº†å¢ç›Šæ§åˆ¶çš„å¸ƒå±€è°ƒæ•´

### å…³é”®CSSç±»
- `.config-area` - é…ç½®åŒºåŸŸä¸»å®¹å™¨
- `.config-sub-area` - é…ç½®å­åŒºåŸŸå®¹å™¨
- `.config-sub-area-buttons` - æŒ‰é’®å®¹å™¨
- `.config-sub-area-slider-control` - æ»‘å—æ§ä»¶å®¹å™¨
- `.character-area-control-field-horizontal` - å­—ç¬¦åŒºåŸŸæ°´å¹³å¸ƒå±€

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ client/demo/          # å‰ç«¯æ¼”ç¤ºåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ css/         # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ components/  # Reactç»„ä»¶
â”‚   â””â”€â”€ public/          # é™æ€èµ„æº
â”œâ”€â”€ server/              # åç«¯æœåŠ¡
â”œâ”€â”€ docker/              # Dockeré…ç½®
â””â”€â”€ trainer/             # æ¨¡å‹è®­ç»ƒç›¸å…³
```

## å¿«é€Ÿå¼€å§‹

### ğŸ³ ä½¿ç”¨ Docker é•œåƒ (æ¨è)

æœ¬é¡¹ç›®æä¾›äº†ä¼˜åŒ–çš„Dockeré•œåƒï¼Œåœ¨**6006ç«¯å£**å¼€æ”¾å˜å£°ç•Œé¢ï¼Œé…ç½®ç®€å•ï¼Œå¼€ç®±å³ç”¨ã€‚

#### 1. æ„å»ºé•œåƒ
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Sakana-yuyu/voice-changer-better.git
cd voice-changer-better

# æ„å»ºDockeré•œåƒ
docker build -t voice-changer-better:latest .
```

#### 2. è¿è¡Œå®¹å™¨

**GPUç‰ˆæœ¬ï¼ˆæ¨èï¼‰ï¼š**
```bash
docker run -d \
  --name voice-changer-better \
  --gpus all \
  -p 6006:6006 \
  -v $(pwd)/models:/voice-changer/server/model_dir \
  -v $(pwd)/pretrain:/resources \
  -v $(pwd)/tmp:/voice-changer/server/tmp_dir \
  -e LOCAL_UID=$(id -u) \
  -e LOCAL_GID=$(id -g) \
  voice-changer-better:latest
```

**CPUç‰ˆæœ¬ï¼š**
```bash
docker run -d \
  --name voice-changer-better-cpu \
  -p 6006:6006 \
  -v $(pwd)/models:/voice-changer/server/model_dir \
  -v $(pwd)/pretrain:/resources \
  -v $(pwd)/tmp:/voice-changer/server/tmp_dir \
  -e LOCAL_UID=$(id -u) \
  -e LOCAL_GID=$(id -g) \
  voice-changer-better:latest
```

#### 3. è®¿é—®åº”ç”¨
å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
- **å˜å£°ç•Œé¢**: http://localhost:6006

#### 4. å®¹å™¨ç®¡ç†
```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs -f voice-changer-better

# åœæ­¢å®¹å™¨
docker stop voice-changer-better

# é‡å¯å®¹å™¨
docker restart voice-changer-better

# åˆ é™¤å®¹å™¨
docker rm voice-changer-better

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it voice-changer-better bash
```

#### 5. ç›®å½•è¯´æ˜
- `models/`: å­˜æ”¾è¯­éŸ³æ¨¡å‹æ–‡ä»¶ï¼ˆ.pthæ ¼å¼ï¼‰
- `pretrain/`: å­˜æ”¾é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶ï¼ˆ.pth, .onnxæ ¼å¼ï¼‰
- `tmp/`: ä¸´æ—¶æ–‡ä»¶ç›®å½•

#### 6. æ³¨æ„äº‹é¡¹
- **ç«¯å£å˜æ›´**: æ–°ç‰ˆDockeré•œåƒä½¿ç”¨**6006ç«¯å£**è€Œéä¼ ç»Ÿçš„18888ç«¯å£
- **è‡ªåŠ¨ç”¨æˆ·ç®¡ç†**: å®¹å™¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸å®¿ä¸»æœºUID/GIDåŒ¹é…çš„ç”¨æˆ·ï¼Œé¿å…æƒé™é—®é¢˜
- **GPUæ”¯æŒ**: ç¡®ä¿å·²å®‰è£…NVIDIA Dockeræ”¯æŒï¼ˆ`nvidia-docker2`ï¼‰
- **å†…å­˜è¦æ±‚**: å»ºè®®è‡³å°‘8GB RAMï¼ŒGPUç‰ˆæœ¬éœ€è¦4GB+ VRAM
- **æ¨¡å‹æ–‡ä»¶**: é¦–æ¬¡è¿è¡Œå‰è¯·å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥å¯¹åº”çš„æŒ‚è½½ç›®å½•

#### 7. æ•…éšœæ’é™¤

**å®¹å™¨æ— æ³•å¯åŠ¨ï¼š**
```bash
# æ£€æŸ¥Dockeræ˜¯å¦è¿è¡Œ
sudo systemctl status docker

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
sudo netstat -tlnp | grep 6006

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
docker logs voice-changer-better
```

**GPUä¸å¯ç”¨ï¼š**
```bash
# æ£€æŸ¥NVIDIA Dockeræ”¯æŒ
docker run --rm --gpus all nvidia/cuda:11.0-base nvidia-smi

# å¦‚æœå¤±è´¥ï¼Œå®‰è£…nvidia-docker2
sudo apt-get update
sudo apt-get install -y nvidia-docker2
sudo systemctl restart docker
```

**æƒé™é—®é¢˜ï¼š**
```bash
# ç¡®ä¿ç›®å½•æƒé™æ­£ç¡®
sudo chown -R $(id -u):$(id -g) models/ pretrain/ tmp/

# æˆ–ä½¿ç”¨sudoè¿è¡Œå®¹å™¨
sudo docker run ...
```

#### 8. å¿«é€Ÿæµ‹è¯•

**éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š**
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep voice-changer-better

# æµ‹è¯•APIæ¥å£
curl http://localhost:6006/api/hello

# æ£€æŸ¥å¥åº·çŠ¶æ€
docker inspect --format='{{.State.Health.Status}}' voice-changer-better
```

**è®¿é—®Webç•Œé¢ï¼š**
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:6006
2. å¦‚æœçœ‹åˆ°Voice Changerç•Œé¢ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸ
3. ä¸Šä¼ æ¨¡å‹æ–‡ä»¶åˆ° `models/` ç›®å½•
4. åœ¨ç•Œé¢ä¸­é€‰æ‹©æ¨¡å‹å¼€å§‹ä½¿ç”¨

### ä½¿ç”¨ä¼ ç»Ÿ Docker Compose

#### 1. ä½¿ç”¨ docker-compose (æœ€ç®€å•)
```bash
# GPU ç‰ˆæœ¬
docker-compose up -d

# CPU ç‰ˆæœ¬
docker-compose --profile cpu up -d voice-changer-cpu
```

#### 2. ä½¿ç”¨æ„å»ºè„šæœ¬
```bash
# æ„å»ºé•œåƒ
chmod +x scripts/build-docker.sh
./scripts/build-docker.sh

# éƒ¨ç½²æœåŠ¡
chmod +x scripts/deploy.sh
./scripts/deploy.sh --mode gpu --port 18888
```

#### 3. æ‰‹åŠ¨ Docker å‘½ä»¤
```bash
# æ„å»ºé•œåƒ
docker build -t voice-changer-better .

# è¿è¡Œå®¹å™¨ (GPU)
docker run -d --name voice-changer --gpus all -p 18888:18888 voice-changer-better

# è¿è¡Œå®¹å™¨ (CPU)
docker run -d --name voice-changer -p 18888:18888 voice-changer-better
```

### æœ¬åœ°å¼€å‘

#### å‰ç«¯å¼€å‘
```bash
cd client/demo
npm install
npm start
```

#### åç«¯æœåŠ¡
```bash
cd server
pip install -r requirements.txt
python MMVCServerSIO.py
```

## ç‰¹æ€§

- ğŸµ æ”¯æŒå¤šç§è¯­éŸ³å˜å£°æ¨¡å‹
- ğŸ”„ å®æ—¶è¯­éŸ³å¤„ç†
- ğŸ›ï¸ ç›´è§‚çš„ç”¨æˆ·ç•Œé¢
- ğŸ“± å“åº”å¼è®¾è®¡
- âš¡ ä¼˜åŒ–çš„æ€§èƒ½
- ğŸ¨ ç°ä»£åŒ–çš„UIè®¾è®¡
- ğŸ³ Docker å®¹å™¨åŒ–æ”¯æŒ
- ğŸš€ è‡ªåŠ¨åŒ– CI/CD æµç¨‹
- ğŸ“¦ å¤šå¹³å°é•œåƒæ”¯æŒ

## éƒ¨ç½²é€‰é¡¹

### 1. Docker éƒ¨ç½² (æ¨è)
- æ”¯æŒ GPU å’Œ CPU æ¨¡å¼
- ä¸€é”®éƒ¨ç½²è„šæœ¬
- è‡ªåŠ¨å¥åº·æ£€æŸ¥
- æ•°æ®æŒä¹…åŒ–

### 2. äº‘å¹³å°éƒ¨ç½²
- æ”¯æŒ Kubernetes
- æ”¯æŒ Docker Swarm
- æ”¯æŒå„å¤§äº‘æœåŠ¡å•†

### 3. æœ¬åœ°å¼€å‘
- çƒ­é‡è½½å¼€å‘ç¯å¢ƒ
- å®Œæ•´çš„å¼€å‘å·¥å…·é“¾
- ä»£ç è´¨é‡æ£€æŸ¥

## ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows
- **å†…å­˜**: æœ€å°‘ 4GB RAM (æ¨è 8GB+)
- **å­˜å‚¨**: æœ€å°‘ 10GB å¯ç”¨ç©ºé—´
- **GPU**: NVIDIA GPU (å¯é€‰ï¼Œç”¨äºåŠ é€Ÿ)

### è½¯ä»¶ä¾èµ–
- **Docker**: 20.10+ (ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)
- **Docker Compose**: 2.0+ (ç”¨äºç¼–æ’)
- **Node.js**: 18+ (ç”¨äºå‰ç«¯å¼€å‘)
- **Python**: 3.8+ (ç”¨äºåç«¯å¼€å‘)
- **CUDA**: 11.8+ (ç”¨äº GPU åŠ é€Ÿ)

## è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªåŸé¡¹ç›®çš„è®¸å¯è¯æ¡æ¬¾ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (UIä¼˜åŒ–ç‰ˆ)
- å®Œæˆæ•´ä½“UIç•Œé¢çš„ç´§å‡‘åŒ–è®¾è®¡
- ä¼˜åŒ–æ§åˆ¶æŒ‰é’®å’Œæ»‘å—æ§ä»¶çš„è§†è§‰æ•ˆæœ
- å®ç°å­—ç¬¦åŒºåŸŸæ§åˆ¶çš„æ°´å¹³å¸ƒå±€
- æå‡ç”¨æˆ·ç•Œé¢çš„æ•´ä½“ä¸€è‡´æ€§å’Œç¾è§‚åº¦
